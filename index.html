<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YTLooper - YouTube Video Looper</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <h1 class="logo">YTLooper</h1>
    <button id="shortcuts-btn" class="icon-btn" title="Keyboard shortcuts (?)">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="2" y="4" width="20" height="16" rx="2"/>
        <path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M6 12h.01M10 12h.01M14 12h.01M18 12h.01M8 16h8"/>
      </svg>
    </button>
  </header>

  <main class="container">
    <!-- URL Input -->
    <section class="url-input-area">
      <div class="input-group">
        <input type="text" id="url-input" placeholder="Paste a YouTube URL here..." autocomplete="off" spellcheck="false">
        <button id="load-btn">Load</button>
      </div>
      <p id="url-error" class="error-text"></p>
    </section>

    <!-- Video Player -->
    <section class="player-section">
      <div class="video-wrapper" id="video-wrapper">
        <div id="yt-player"></div>
        <div id="player-placeholder" class="placeholder">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3">
            <polygon points="5 3 19 12 5 21 5 3"/>
          </svg>
          <p>Paste a YouTube URL above to get started</p>
        </div>
      </div>
    </section>

    <!-- Playback Controls -->
    <section class="controls-bar" id="controls-bar">
      <div class="controls-left">
        <button id="play-pause-btn" class="control-btn" title="Play/Pause (Space)">
          <svg id="play-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <polygon points="5 3 19 12 5 21 5 3"/>
          </svg>
          <svg id="pause-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display:none">
            <rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>
          </svg>
        </button>
        <span id="time-display" class="time-display">0:00 / 0:00</span>
      </div>
      <div class="controls-center">
        <div class="speed-buttons" id="speed-buttons"></div>
      </div>
      <div class="controls-right">
        <button id="loop-toggle-btn" class="control-btn loop-btn" title="Toggle loop (L)">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 2l4 4-4 4"/><path d="M3 11V9a4 4 0 014-4h14"/>
            <path d="M7 22l-4-4 4-4"/><path d="M21 13v2a4 4 0 01-4 4H3"/>
          </svg>
          <span>Loop</span>
        </button>
      </div>
    </section>

    <!-- Timeline / AB Loop Selector -->
    <section class="timeline-section" id="timeline-section">
      <div class="timeline-controls">
        <div class="timeline-controls-left">
          <button id="set-a-btn" class="ab-btn" title="Set A point (A key)">Set A</button>
          <span id="a-time-display" class="ab-time">A: 0:00</span>
        </div>
        <div class="timeline-controls-center">
          <button id="reset-ab-btn" class="ab-btn reset-btn" title="Reset A/B (R key)">Reset</button>
        </div>
        <div class="timeline-controls-right">
          <span id="b-time-display" class="ab-time">B: 0:00</span>
          <button id="set-b-btn" class="ab-btn" title="Set B point (B key)">Set B</button>
        </div>
      </div>
      <div class="timeline-container">
        <div class="timeline-track" id="timeline-track">
          <div class="timeline-loop-region" id="loop-region"></div>
          <div class="timeline-playhead" id="playhead"></div>
          <div class="timeline-handle handle-a" id="handle-a" title="Loop start (A)"></div>
          <div class="timeline-handle handle-b" id="handle-b" title="Loop end (B)"></div>
        </div>
      </div>
    </section>

    <!-- Section Playlist -->
    <section class="sections-panel" id="sections-panel">
      <div class="sections-header">
        <h2>Saved Sections</h2>
        <div class="sections-actions">
          <button id="import-btn" class="small-btn" title="Import sections from JSON">Import</button>
          <button id="export-btn" class="small-btn" title="Export sections as JSON">Export</button>
          <button id="add-section-btn" class="small-btn primary-btn">+ Add Section</button>
        </div>
      </div>
      <div id="add-section-form" class="add-section-form" hidden>
        <input type="text" id="section-name-input" placeholder="Section name...">
        <button id="save-section-btn" class="small-btn primary-btn">Save</button>
        <button id="cancel-section-btn" class="small-btn">Cancel</button>
      </div>
      <div id="section-list" class="section-list">
        <p id="no-sections-msg" class="muted-text">No sections saved yet. Set an A-B loop and click "+ Add Section".</p>
      </div>
      <input type="file" id="import-file-input" accept=".json" hidden>
    </section>
  </main>

  <!-- Keyboard Shortcuts Modal -->
  <div id="shortcuts-modal" class="modal" hidden>
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Keyboard Shortcuts</h2>
        <button id="close-modal-btn" class="icon-btn">&times;</button>
      </div>
      <table class="shortcuts-table">
        <tbody>
          <tr><td><kbd>Space</kbd></td><td>Play / Pause</td></tr>
          <tr><td><kbd>L</kbd></td><td>Toggle loop</td></tr>
          <tr><td><kbd>A</kbd></td><td>Set point A to current time</td></tr>
          <tr><td><kbd>B</kbd></td><td>Set point B to current time</td></tr>
          <tr><td><kbd>[</kbd></td><td>Jump to point A</td></tr>
          <tr><td><kbd>]</kbd></td><td>Jump to point B</td></tr>
          <tr><td><kbd>&larr;</kbd></td><td>Seek back 5 seconds</td></tr>
          <tr><td><kbd>&rarr;</kbd></td><td>Seek forward 5 seconds</td></tr>
          <tr><td><kbd>Shift + &larr;</kbd></td><td>Seek back 1 second</td></tr>
          <tr><td><kbd>Shift + &rarr;</kbd></td><td>Seek forward 1 second</td></tr>
          <tr><td><kbd>-</kbd></td><td>Decrease speed</td></tr>
          <tr><td><kbd>+ / =</kbd></td><td>Increase speed</td></tr>
          <tr><td><kbd>R</kbd></td><td>Reset A/B to full video</td></tr>
          <tr><td><kbd>?</kbd></td><td>Show / hide this help</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
